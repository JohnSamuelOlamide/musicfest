function onDomContentLoaded(){initAnimationsAndScroll(),document.body.classList.remove("fade-in"),document.body.addEventListener("click",onLinkClick)}function onPageShow(e){e.persisted&&document.body.classList.remove("fade-out")}function onAlpineInit(){Alpine.store("app",{menuOpen:!1,toggleMenu(){this.menuOpen=!this.menuOpen}})}function onLinkClick(e){const t=e.target.closest("a");if(!t)return;if("_blank"===t.target)return;if(t.hostname!==window.location.hostname)return;const n=t.href,o=window.location.href.split("#")[0],i=n.split("#")[0];o!==i&&(e.preventDefault(),document.body.classList.add("fade-out"),setTimeout(()=>{document.body.classList.contains("fade-out")&&(window.location=n)},150))}function initAnimationsAndScroll(){gsap.registerPlugin(ScrollTrigger),gsap.registerPlugin(ScrollToPlugin),lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{lenis.raf(1e3*e)}),animateHeaderScrub(),animateCanvas(),executeStartAnimations(),fadeInOnScroll()}function animateHeaderScrub(){const e=document.querySelector("header .scrub"),t=.5;e&&gsap.fromTo(e,{y:0},{y:()=>window.innerHeight*t,ease:"none",scrollTrigger:{trigger:"header",start:"top top",end:"bottom top",scrub:.2,invalidateOnRefresh:!0}})}function fadeInOnScroll(){setTimeout(()=>{gsap.utils.toArray(".scroll-fade").forEach(e=>{const t=e.closest(".no-scroll-fade");if(t&&t!==e)return;let n=e.closest("section")||document.documentElement,o=n.getBoundingClientRect(),i=e.getBoundingClientRect(),a=i.left-o.left,r=Math.min(Math.max(a/o.width,0),1);const s=100,c=150,l=200,d=350;let u=s+(c-s)*r,m=l+(d-l)*r,g=`top bottom-=${u}px`,p=`top bottom-=${m}px`;gsap.fromTo(e,{opacity:.01,y:50},{opacity:1,y:0,scrollTrigger:{trigger:e,scrub:2,invalidateOnRefresh:!0,start:g,end:p}})})},0)}function executeStartAnimations(){const e=gsap.timeline({delay:1}),t=document.querySelectorAll(".start-anim.primary"),n=document.querySelectorAll(".start-anim.secondary"),o=document.querySelector("header .media");t.length&&e.fromTo(t,{y:80,opacity:0},{duration:1.5,y:0,opacity:1,ease:"power2.out",stagger:.1}),o&&gsap.fromTo(o,{scale:1.3,opacity:0},{delay:1,duration:3,scale:1,opacity:1,ease:"power2.out"}),n.length&&e.fromTo(n,{y:40,opacity:0},{duration:1.5,y:0,opacity:1,ease:"power4.out",stagger:.1},"-=0.8")}document.addEventListener("DOMContentLoaded",onDomContentLoaded),window.addEventListener("pageshow",onPageShow),document.addEventListener("alpine:init",onAlpineInit);const lenis=new Lenis;