document.addEventListener("alpine:init",()=>{Alpine.data("countdown",(t,e)=>({daysValue:0,hoursValue:0,minutesValue:0,secondsValue:0,daysStrips:[],hoursStrips:[],minutesStrips:[],secondsStrips:[],intervalId:null,resizeHandler:null,resizeTimeout:null,digitSizes:{},units:["days","hours","minutes","seconds"],labels:e,init(){document.fonts.ready.then(()=>{this.units.forEach(t=>{this.createNumberStrips(t,"days"===t?3:2)}),this.adjustAllStripDimensions(),this.resizeHandler=(()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.adjustAllStripDimensions(),this.update(!0)},200)}),window.addEventListener("resize",this.resizeHandler),this.update(),this.startCountdown()})},startCountdown(){this.intervalId||(this.intervalId=setInterval(()=>{this.update(),0===this.daysValue&&0===this.hoursValue&&0===this.minutesValue&&0===this.secondsValue&&this.stopCountdown()},1e3))},stopCountdown(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null)},adjustAllStripDimensions(){this.units.forEach(t=>this.adjustStripDimensions(t))},createNumberStrips(t,e){const i=this.$refs[t];if(!i)return;i.innerHTML="";const s=[];for(let t=0;t<e;t++){const t=document.createElement("div");t.classList.add("number-strip-cd");const e=document.createElement("div");e.classList.add("digits-cd");for(let t=0;t<=9;t++){const i=document.createElement("div");i.classList.add("digit-cd","font-bold","text-h2","leading-none"),i.textContent=t,e.appendChild(i)}t.appendChild(e),i.appendChild(t),s.push({stripElement:t,digitsContainer:e,currentDigit:0,digitHeight:null})}this[t+"Strips"]=s,this.$nextTick(()=>{this.adjustStripDimensions(t)})},adjustStripDimensions(t){const e=this[t+"Strips"];e&&e.forEach(t=>{const e=t.digitsContainer.querySelector(".digit-cd");if(e){const i=e.getBoundingClientRect(),s=i.width,n=i.height;t.stripElement.style.width=s+"px",t.stripElement.style.height=n+"px",t.digitHeight=n}})},update(e=!1){const i=Math.max(0,1e3*t-(new Date).getTime()),s=Math.max(0,Math.floor(i/864e5)),n=Math.max(0,Math.floor(i%864e5/36e5)),a=Math.max(0,Math.floor(i%36e5/6e4)),r=Math.max(0,Math.floor(i%6e4/1e3));this.updateUnit("days",s,e),this.updateUnit("hours",n,e),this.updateUnit("minutes",a,e),this.updateUnit("seconds",r,e),this.$refs.accessibleText&&(this.$refs.accessibleText.textContent=`\n          ${this.daysValue} ${this.getLabel("day",this.daysValue)},\n          ${this.hoursValue} ${this.getLabel("hour",this.hoursValue)},\n          ${this.minutesValue} ${this.getLabel("minute",this.minutesValue)},\n          ${this.secondsValue} ${this.getLabel("second",this.secondsValue)}`)},updateUnit(t,e,i=!1){const s=this[t+"Strips"];if(!s)return;const n=s.length,a=e.toString().padStart(n,"0");a.split("").forEach((t,e)=>{const n=s[e],a=parseInt(t,10);if(n.currentDigit!==a||i){let t=n.digitHeight;if(!t){const e=n.digitsContainer.querySelector(".digit-cd");t=e?e.offsetHeight:0,n.digitHeight=t}const e=a*t;gsap.to(n.digitsContainer,{y:-e,duration:.5,ease:"power2.out"}),n.currentDigit=a}}),this[t+"Value"]=e},getLabel(t,e){return 1===e?this.labels[t].singular:this.labels[t].plural}}))});